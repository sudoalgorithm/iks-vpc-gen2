##############################################################################
# Provider
##############################################################################

provider ibm {
  ibmcloud_api_key = var.ibmcloud_api_key
  region           = var.ibm_region
  generation       = var.generation
  ibmcloud_timeout = 60
}

##############################################################################


##############################################################################
# Resource Group
##############################################################################

data ibm_resource_group group {
  name = var.resource_group
}

##############################################################################


##############################################################################
# VPC Data
#############################################################################

data ibm_is_vpc vpc {
  name = var.vpc_name
}

#############################################################################


##############################################################################
# Create Subnets
##############################################################################

data ibm_is_subnet subnet {
  count      = length(var.subnet_names)

  identifier = local.subnet_ids[count.index]
}

##############################################################################